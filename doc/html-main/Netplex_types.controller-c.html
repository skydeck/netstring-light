<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Netplex_types.logger-c.html">
<link rel="next" href="Netplex_types.controller_config-c.html">
<link rel="Up" href="Netplex_types.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Uq_gtk" rel="Chapter" href="Uq_gtk.html">
<link title="Equeue" rel="Chapter" href="Equeue.html">
<link title="Unixqueue" rel="Chapter" href="Unixqueue.html">
<link title="Unixqueue_pollset" rel="Chapter" href="Unixqueue_pollset.html">
<link title="Unixqueue_select" rel="Chapter" href="Unixqueue_select.html">
<link title="Uq_resolver" rel="Chapter" href="Uq_resolver.html">
<link title="Uq_engines" rel="Chapter" href="Uq_engines.html">
<link title="Uq_socks5" rel="Chapter" href="Uq_socks5.html">
<link title="Uq_io" rel="Chapter" href="Uq_io.html">
<link title="Uq_lwt" rel="Chapter" href="Uq_lwt.html">
<link title="Uq_libevent" rel="Chapter" href="Uq_libevent.html">
<link title="Uq_mt" rel="Chapter" href="Uq_mt.html">
<link title="Equeue_intro" rel="Chapter" href="Equeue_intro.html">
<link title="Equeue_howto" rel="Chapter" href="Equeue_howto.html">
<link title="Uq_ssl" rel="Chapter" href="Uq_ssl.html">
<link title="Https_client" rel="Chapter" href="Https_client.html">
<link title="Uq_tcl" rel="Chapter" href="Uq_tcl.html">
<link title="Netcamlbox" rel="Chapter" href="Netcamlbox.html">
<link title="Netcgi_apache" rel="Chapter" href="Netcgi_apache.html">
<link title="Netcgi_modtpl" rel="Chapter" href="Netcgi_modtpl.html">
<link title="Netcgi_common" rel="Chapter" href="Netcgi_common.html">
<link title="Netcgi" rel="Chapter" href="Netcgi.html">
<link title="Netcgi_ajp" rel="Chapter" href="Netcgi_ajp.html">
<link title="Netcgi_scgi" rel="Chapter" href="Netcgi_scgi.html">
<link title="Netcgi_cgi" rel="Chapter" href="Netcgi_cgi.html">
<link title="Netcgi_fcgi" rel="Chapter" href="Netcgi_fcgi.html">
<link title="Netcgi_dbi" rel="Chapter" href="Netcgi_dbi.html">
<link title="Netcgi1_compat" rel="Chapter" href="Netcgi1_compat.html">
<link title="Netcgi_test" rel="Chapter" href="Netcgi_test.html">
<link title="Netcgi_porting" rel="Chapter" href="Netcgi_porting.html">
<link title="Netcgi_plex" rel="Chapter" href="Netcgi_plex.html">
<link title="Http_client_conncache" rel="Chapter" href="Http_client_conncache.html">
<link title="Http_client" rel="Chapter" href="Http_client.html">
<link title="Telnet_client" rel="Chapter" href="Telnet_client.html">
<link title="Ftp_data_endpoint" rel="Chapter" href="Ftp_data_endpoint.html">
<link title="Ftp_client" rel="Chapter" href="Ftp_client.html">
<link title="Http_fs" rel="Chapter" href="Http_fs.html">
<link title="Ftp_fs" rel="Chapter" href="Ftp_fs.html">
<link title="Netclient_tut" rel="Chapter" href="Netclient_tut.html">
<link title="Netgssapi" rel="Chapter" href="Netgssapi.html">
<link title="Nethttpd_types" rel="Chapter" href="Nethttpd_types.html">
<link title="Nethttpd_kernel" rel="Chapter" href="Nethttpd_kernel.html">
<link title="Nethttpd_reactor" rel="Chapter" href="Nethttpd_reactor.html">
<link title="Nethttpd_engine" rel="Chapter" href="Nethttpd_engine.html">
<link title="Nethttpd_services" rel="Chapter" href="Nethttpd_services.html">
<link title="Nethttpd_plex" rel="Chapter" href="Nethttpd_plex.html">
<link title="Nethttpd_util" rel="Chapter" href="Nethttpd_util.html">
<link title="Nethttpd_intro" rel="Chapter" href="Nethttpd_intro.html">
<link title="Netmech_scram" rel="Chapter" href="Netmech_scram.html">
<link title="Netmech_scram_gssapi" rel="Chapter" href="Netmech_scram_gssapi.html">
<link title="Netmcore" rel="Chapter" href="Netmcore.html">
<link title="Netmcore_camlbox" rel="Chapter" href="Netmcore_camlbox.html">
<link title="Netmcore_mempool" rel="Chapter" href="Netmcore_mempool.html">
<link title="Netmcore_heap" rel="Chapter" href="Netmcore_heap.html">
<link title="Netmcore_ref" rel="Chapter" href="Netmcore_ref.html">
<link title="Netmcore_array" rel="Chapter" href="Netmcore_array.html">
<link title="Netmcore_sem" rel="Chapter" href="Netmcore_sem.html">
<link title="Netmcore_mutex" rel="Chapter" href="Netmcore_mutex.html">
<link title="Netmcore_condition" rel="Chapter" href="Netmcore_condition.html">
<link title="Netmcore_queue" rel="Chapter" href="Netmcore_queue.html">
<link title="Netmcore_buffer" rel="Chapter" href="Netmcore_buffer.html">
<link title="Netmcore_matrix" rel="Chapter" href="Netmcore_matrix.html">
<link title="Netmcore_hashtbl" rel="Chapter" href="Netmcore_hashtbl.html">
<link title="Netmcore_process" rel="Chapter" href="Netmcore_process.html">
<link title="Netmcore_tut" rel="Chapter" href="Netmcore_tut.html">
<link title="Netplex_types" rel="Chapter" href="Netplex_types.html">
<link title="Netplex_mp" rel="Chapter" href="Netplex_mp.html">
<link title="Netplex_mt" rel="Chapter" href="Netplex_mt.html">
<link title="Netplex_log" rel="Chapter" href="Netplex_log.html">
<link title="Netplex_controller" rel="Chapter" href="Netplex_controller.html">
<link title="Netplex_container" rel="Chapter" href="Netplex_container.html">
<link title="Netplex_sockserv" rel="Chapter" href="Netplex_sockserv.html">
<link title="Netplex_workload" rel="Chapter" href="Netplex_workload.html">
<link title="Netplex_main" rel="Chapter" href="Netplex_main.html">
<link title="Netplex_config" rel="Chapter" href="Netplex_config.html">
<link title="Netplex_kit" rel="Chapter" href="Netplex_kit.html">
<link title="Rpc_netplex" rel="Chapter" href="Rpc_netplex.html">
<link title="Netplex_cenv" rel="Chapter" href="Netplex_cenv.html">
<link title="Netplex_semaphore" rel="Chapter" href="Netplex_semaphore.html">
<link title="Netplex_sharedvar" rel="Chapter" href="Netplex_sharedvar.html">
<link title="Netplex_mutex" rel="Chapter" href="Netplex_mutex.html">
<link title="Netplex_encap" rel="Chapter" href="Netplex_encap.html">
<link title="Netplex_intro" rel="Chapter" href="Netplex_intro.html">
<link title="Netplex_advanced" rel="Chapter" href="Netplex_advanced.html">
<link title="Netplex_admin" rel="Chapter" href="Netplex_admin.html">
<link title="Netshm" rel="Chapter" href="Netshm.html">
<link title="Netshm_data" rel="Chapter" href="Netshm_data.html">
<link title="Netshm_hashtbl" rel="Chapter" href="Netshm_hashtbl.html">
<link title="Netshm_array" rel="Chapter" href="Netshm_array.html">
<link title="Netshm_intro" rel="Chapter" href="Netshm_intro.html">
<link title="Netconversion" rel="Chapter" href="Netconversion.html">
<link title="Netchannels" rel="Chapter" href="Netchannels.html">
<link title="Netstream" rel="Chapter" href="Netstream.html">
<link title="Mimestring" rel="Chapter" href="Mimestring.html">
<link title="Netmime" rel="Chapter" href="Netmime.html">
<link title="Netsendmail" rel="Chapter" href="Netsendmail.html">
<link title="Neturl" rel="Chapter" href="Neturl.html">
<link title="Netaddress" rel="Chapter" href="Netaddress.html">
<link title="Netbuffer" rel="Chapter" href="Netbuffer.html">
<link title="Netdate" rel="Chapter" href="Netdate.html">
<link title="Netencoding" rel="Chapter" href="Netencoding.html">
<link title="Netulex" rel="Chapter" href="Netulex.html">
<link title="Netaccel" rel="Chapter" href="Netaccel.html">
<link title="Netaccel_link" rel="Chapter" href="Netaccel_link.html">
<link title="Nethtml" rel="Chapter" href="Nethtml.html">
<link title="Netstring_str" rel="Chapter" href="Netstring_str.html">
<link title="Netmappings" rel="Chapter" href="Netmappings.html">
<link title="Netaux" rel="Chapter" href="Netaux.html">
<link title="Nethttp" rel="Chapter" href="Nethttp.html">
<link title="Netpagebuffer" rel="Chapter" href="Netpagebuffer.html">
<link title="Netfs" rel="Chapter" href="Netfs.html">
<link title="Netglob" rel="Chapter" href="Netglob.html">
<link title="Netauth" rel="Chapter" href="Netauth.html">
<link title="Netsockaddr" rel="Chapter" href="Netsockaddr.html">
<link title="Netnumber" rel="Chapter" href="Netnumber.html">
<link title="Rtypes" rel="Chapter" href="Rtypes.html">
<link title="Xdr_mstring" rel="Chapter" href="Xdr_mstring.html">
<link title="Xdr" rel="Chapter" href="Xdr.html">
<link title="Netcompression" rel="Chapter" href="Netcompression.html">
<link title="Netunichar" rel="Chapter" href="Netunichar.html">
<link title="Netchannels_tut" rel="Chapter" href="Netchannels_tut.html">
<link title="Netmime_tut" rel="Chapter" href="Netmime_tut.html">
<link title="Netsendmail_tut" rel="Chapter" href="Netsendmail_tut.html">
<link title="Netulex_tut" rel="Chapter" href="Netulex_tut.html">
<link title="Neturl_tut" rel="Chapter" href="Neturl_tut.html">
<link title="Netstring_pcre" rel="Chapter" href="Netstring_pcre.html">
<link title="Netsys" rel="Chapter" href="Netsys.html">
<link title="Netsys_posix" rel="Chapter" href="Netsys_posix.html">
<link title="Netsys_pollset" rel="Chapter" href="Netsys_pollset.html">
<link title="Netlog" rel="Chapter" href="Netlog.html">
<link title="Netexn" rel="Chapter" href="Netexn.html">
<link title="Netsys_win32" rel="Chapter" href="Netsys_win32.html">
<link title="Netsys_pollset_posix" rel="Chapter" href="Netsys_pollset_posix.html">
<link title="Netsys_pollset_win32" rel="Chapter" href="Netsys_pollset_win32.html">
<link title="Netsys_pollset_generic" rel="Chapter" href="Netsys_pollset_generic.html">
<link title="Netsys_signal" rel="Chapter" href="Netsys_signal.html">
<link title="Netsys_oothr" rel="Chapter" href="Netsys_oothr.html">
<link title="Netsys_xdr" rel="Chapter" href="Netsys_xdr.html">
<link title="Netsys_rng" rel="Chapter" href="Netsys_rng.html">
<link title="Netsys_types" rel="Chapter" href="Netsys_types.html">
<link title="Netsys_mem" rel="Chapter" href="Netsys_mem.html">
<link title="Netsys_tmp" rel="Chapter" href="Netsys_tmp.html">
<link title="Netsys_sem" rel="Chapter" href="Netsys_sem.html">
<link title="Netsys_pmanage" rel="Chapter" href="Netsys_pmanage.html">
<link title="Netgzip" rel="Chapter" href="Netgzip.html">
<link title="Netpop" rel="Chapter" href="Netpop.html">
<link title="Rpc_auth_dh" rel="Chapter" href="Rpc_auth_dh.html">
<link title="Rpc_key_service" rel="Chapter" href="Rpc_key_service.html">
<link title="Rpc_time" rel="Chapter" href="Rpc_time.html">
<link title="Rpc_auth_local" rel="Chapter" href="Rpc_auth_local.html">
<link title="Rpc" rel="Chapter" href="Rpc.html">
<link title="Rpc_program" rel="Chapter" href="Rpc_program.html">
<link title="Rpc_util" rel="Chapter" href="Rpc_util.html">
<link title="Rpc_portmapper_aux" rel="Chapter" href="Rpc_portmapper_aux.html">
<link title="Rpc_packer" rel="Chapter" href="Rpc_packer.html">
<link title="Rpc_transport" rel="Chapter" href="Rpc_transport.html">
<link title="Rpc_client" rel="Chapter" href="Rpc_client.html">
<link title="Rpc_simple_client" rel="Chapter" href="Rpc_simple_client.html">
<link title="Rpc_portmapper_clnt" rel="Chapter" href="Rpc_portmapper_clnt.html">
<link title="Rpc_portmapper" rel="Chapter" href="Rpc_portmapper.html">
<link title="Rpc_server" rel="Chapter" href="Rpc_server.html">
<link title="Rpc_auth_sys" rel="Chapter" href="Rpc_auth_sys.html">
<link title="Rpc_auth_gssapi" rel="Chapter" href="Rpc_auth_gssapi.html">
<link title="Rpc_proxy" rel="Chapter" href="Rpc_proxy.html">
<link title="Rpc_intro" rel="Chapter" href="Rpc_intro.html">
<link title="Rpc_mapping_ref" rel="Chapter" href="Rpc_mapping_ref.html">
<link title="Rpc_intro_gss" rel="Chapter" href="Rpc_intro_gss.html">
<link title="Rpc_ssl" rel="Chapter" href="Rpc_ssl.html">
<link title="Rpc_xti_client" rel="Chapter" href="Rpc_xti_client.html">
<link title="Shell_sys" rel="Chapter" href="Shell_sys.html">
<link title="Shell" rel="Chapter" href="Shell.html">
<link title="Shell_uq" rel="Chapter" href="Shell_uq.html">
<link title="Shell_fs" rel="Chapter" href="Shell_fs.html">
<link title="Shell_intro" rel="Chapter" href="Shell_intro.html">
<link title="Netsmtp" rel="Chapter" href="Netsmtp.html">
<link title="Intro" rel="Chapter" href="Intro.html">
<link title="Platform" rel="Chapter" href="Platform.html">
<link title="Foreword" rel="Chapter" href="Foreword.html">
<link title="Ipv6" rel="Chapter" href="Ipv6.html"><title>Ocamlnet 3 Reference Manual : Netplex_types.controller</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Netplex_types.logger-c.html" title="Netplex_types.logger">Previous</a>
&nbsp;<a class="up" href="Netplex_types.html" title="Netplex_types">Up</a>
&nbsp;<a class="post" href="Netplex_types.controller_config-c.html" title="Netplex_types.controller_config">Next</a>
</div>
<h1>Class type <a href="type_Netplex_types.controller.html">Netplex_types.controller</a></h1>
<pre><span id="TYPEcontroller"><span class="keyword">class type</span> controller</span> = <code class="code">object</code> <a href="Netplex_types.controller-c.html">..</a> <code class="code">end</code></pre><div class="info">
The controller is the object in the Netplex master process/thread
    that manages the containers, logging, and service definitions<br>
</div>
<hr width="100%">
<pre><span id="METHODptype"><span class="keyword">method</span> ptype</span> : <code class="type"><a href="Netplex_types.html#TYPEparallelization_type">parallelization_type</a></code></pre><div class="info">
The actually effective parallelization type<br>
</div>
<pre><span id="METHODsys_id"><span class="keyword">method</span> sys_id</span> : <code class="type"><a href="Netplex_types.html#TYPEthread_sys_id">thread_sys_id</a></code></pre><div class="info">
The thread running the controller<br>
</div>
<pre><span id="METHODcontroller_config"><span class="keyword">method</span> controller_config</span> : <code class="type"><a href="Netplex_types.controller_config-c.html">controller_config</a></code></pre><pre><span id="METHODservices"><span class="keyword">method</span> services</span> : <code class="type">(<a href="Netplex_types.socket_service-c.html">socket_service</a> * <a href="Netplex_types.socket_controller-c.html">socket_controller</a> *<br>        <a href="Netplex_types.workload_manager-c.html">workload_manager</a>)<br>       list</code></pre><div class="info">
The list of controlled services<br>
</div>
<pre><span id="METHODadd_service"><span class="keyword">method</span> add_service</span> : <code class="type"><a href="Netplex_types.socket_service-c.html">socket_service</a> -> <a href="Netplex_types.workload_manager-c.html">workload_manager</a> -> unit</code></pre><div class="info">
Adds a new service. Containers for these services will be started
 soon. It is allowed to add several services with the same name
 (but it will be hard to distinguish them later).<br>
</div>
<pre><span id="METHODadd_message_receiver"><span class="keyword">method</span> add_message_receiver</span> : <code class="type"><a href="Netplex_types.ctrl_message_receiver-c.html">ctrl_message_receiver</a> -> unit</code></pre><div class="info">
Adds a message receiver. This receiver runs in the context of the
        controller and receives all messages sent to it. The <code class="code">name</code> method
        must return the name.<br>
</div>
<pre><span id="METHODadd_plugin"><span class="keyword">method</span> add_plugin</span> : <code class="type"><a href="Netplex_types.plugin-c.html">plugin</a> -> unit</code></pre><div class="info">
Adds a plugin. If the plugin object has already been added, this
        is a no-op.
<p>

        Plugins must have been added before the first container is started.
        This is not checked, however. You are on the safe side when the
        plugin is added in the <code class="code">create_processor</code> factory method, or in
        the <code class="code">post_add_hook</code> of the processor.<br>
</div>
<pre><span id="METHODadd_admin"><span class="keyword">method</span> add_admin</span> : <code class="type">(<a href="Rpc_server.html#TYPEt">Rpc_server.t</a> -> unit) -> unit</code></pre><div class="info">
<code class="code">add_admin setup</code>: Allows to bind another RPC program to the admin
 socket. The function <code class="code">setup</code> will be called whenever a connection
 to the admin socket is established, and this function can call
 <code class="code">Rpc_server.bind</code> to bind another RPC program. By default, only
 the <code class="code">Admin</code> interface is available as described in <code class="code">netplex_ctrl.x</code>.
<p>

 Note that this RPC server runs in the scope of the controller! No
 additional process or thread is created.<br>
</div>
<pre><span id="METHODlogger"><span class="keyword">method</span> logger</span> : <code class="type"><a href="Netplex_types.logger-c.html">logger</a></code></pre><div class="info">
The logger<br>
</div>
<pre><span id="METHODevent_system"><span class="keyword">method</span> event_system</span> : <code class="type"><a href="Unixqueue.unix_event_system-c.html">Unixqueue.unix_event_system</a></code></pre><div class="info">
The event system used by the controller. It <b>must not</b> be used
 from a container.<br>
</div>
<pre><span id="METHODrestart"><span class="keyword">method</span> restart</span> : <code class="type">unit -> unit</code></pre><div class="info">
Initiates a restart of all containers: All threads/processes are
 terminated and replaced by newly initialized ones.<br>
</div>
<pre><span id="METHODshutdown"><span class="keyword">method</span> shutdown</span> : <code class="type">unit -> unit</code></pre><div class="info">
Initiates a shutdown of all containers. It is no longer possible
 to add new services. When the shutdown has been completed, 
 the controller will terminate itself. Note that the shutdown is
 performed asynchronously, i.e. this method returns immediately,
 and the messaging required to do the shutdown is done in the 
 background.<br>
</div>
<pre><span id="METHODsend_message"><span class="keyword">method</span> send_message</span> : <code class="type">string -> string -> string array -> unit</code></pre><div class="info">
<code class="code">send_message destination msgname msgargs</code>: Sends a message to
        <code class="code">destination</code>. When this method returns, it is only ensured that
        the receivers registered in the controller have been notified about
        the message (so it can be made sure that any newly forked containers
        know about the message). It is not guaranteed that the existing
        containers are notified when this method returns. This can (and
        usually will) happen at any time in the future.<br>
</div>
<pre><span id="METHODsend_admin_message"><span class="keyword">method</span> send_admin_message</span> : <code class="type">string -> string -> string array -> unit</code></pre><div class="info">
<code class="code">send_message destination msgname msgargs</code>: Sends an admin message to
        <code class="code">destination</code>.
<p>

        See <code class="code">send_message</code> for the notification guarantees.<br>
</div>
<pre><span id="METHODregister_lever"><span class="keyword">method</span> register_lever</span> : <code class="type">(<a href="Netplex_types.controller-c.html">controller</a> -> <a href="Netplex_types.html#TYPEencap">encap</a> -> <a href="Netplex_types.html#TYPEencap">encap</a>) -><br>       int</code></pre><div class="info">
<code class="code">let id = register_lever f</code>: It is possible to register a function <code class="code">f</code>
        in the controller, and run it over the internal RPC interface from
        any container. These functions are called levers. See
        <code class="code">activate_lever</code> below. See also
        <a href="Netplex_cenv.Make_lever.html"><code class="code">Netplex_cenv.Make_lever</code></a> for a convenient way to create
        and use levers.<br>
</div>
<pre><span id="METHODactivate_lever"><span class="keyword">method</span> activate_lever</span> : <code class="type">int -> <a href="Netplex_types.html#TYPEencap">encap</a> -> <a href="Netplex_types.html#TYPEencap">encap</a></code></pre><div class="info">
Runs the registered lever directly<br>
</div>
<pre><span id="METHODcontainers"><span class="keyword">method</span> containers</span> : <code class="type"><a href="Netplex_types.html#TYPEcontainer_id">container_id</a> list</code></pre><div class="info">
Lists the containers<br>
</div>
<pre><span id="METHODcontainers_for"><span class="keyword">method</span> containers_for</span> : <code class="type">string -> <a href="Netplex_types.html#TYPEcontainer_id">container_id</a> list</code></pre><div class="info">
Lists the containers for a certain socket service name<br>
</div>
<pre><span id="METHODcontainer_count"><span class="keyword">method</span> container_count</span> : <code class="type">string -> int</code></pre><div class="info">
The number of containers for a certain socket service name<br>
</div>
<pre><span id="METHODfree_resources"><span class="keyword">method</span> free_resources</span> : <code class="type">unit -> unit</code></pre><div class="info">
Should be called when the controller is finished, in order to
        free resources again. E.g. plugins are unplugged, and the master
        sockets are closed.<br>
</div>
<pre><span id="METHODstartup_directory"><span class="keyword">method</span> startup_directory</span> : <code class="type">string</code></pre><div class="info">
The current directory at startup time<br>
</div>
</body></html>